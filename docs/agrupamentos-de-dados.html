<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Agrupamentos de Dados | Introdução ao R</title>
  <meta name="description" content="Curso de Extensão da UFRN" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Agrupamentos de Dados | Introdução ao R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Curso de Extensão da UFRN" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Agrupamentos de Dados | Introdução ao R" />
  
  <meta name="twitter:description" content="Curso de Extensão da UFRN" />
  

<meta name="author" content="Raimundo Marciano de Freitas Neto" />


<meta name="date" content="2022-03-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="variáveis.html"/>
<link rel="next" href="trabalhando-com-variáveis-no-r-base.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introdução ao R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Boas vindas</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> O que é o R?</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#instalando-o-r"><i class="fa fa-check"></i><b>2.1</b> Instalando o R</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#r-studio"><i class="fa fa-check"></i><b>2.2</b> R Studio</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#r-nas-nuvens"><i class="fa fa-check"></i><b>2.3</b> R nas Nuvens</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#scripts"><i class="fa fa-check"></i><b>2.4</b> Scripts</a></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#exercício"><i class="fa fa-check"></i><b>2.5</b> Exercício</a></li>
<li class="chapter" data-level="2.6" data-path="intro.html"><a href="intro.html#gabarito-exercício"><i class="fa fa-check"></i><b>2.6</b> Gabarito Exercício</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="variáveis.html"><a href="variáveis.html"><i class="fa fa-check"></i><b>3</b> Variáveis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="variáveis.html"><a href="variáveis.html#numéricas"><i class="fa fa-check"></i><b>3.1</b> Numéricas</a></li>
<li class="chapter" data-level="3.2" data-path="variáveis.html"><a href="variáveis.html#textuais"><i class="fa fa-check"></i><b>3.2</b> Textuais</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="variáveis.html"><a href="variáveis.html#numérica-ou-textual"><i class="fa fa-check"></i><b>3.2.1</b> Numérica ou textual?</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="variáveis.html"><a href="variáveis.html#lógicas"><i class="fa fa-check"></i><b>3.3</b> Lógicas</a></li>
<li class="chapter" data-level="3.4" data-path="variáveis.html"><a href="variáveis.html#datas"><i class="fa fa-check"></i><b>3.4</b> Datas</a></li>
<li class="chapter" data-level="3.5" data-path="variáveis.html"><a href="variáveis.html#exercício-1"><i class="fa fa-check"></i><b>3.5</b> Exercício</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="agrupamentos-de-dados.html"><a href="agrupamentos-de-dados.html"><i class="fa fa-check"></i><b>4</b> Agrupamentos de Dados</a>
<ul>
<li class="chapter" data-level="4.1" data-path="agrupamentos-de-dados.html"><a href="agrupamentos-de-dados.html#vetores"><i class="fa fa-check"></i><b>4.1</b> Vetores</a></li>
<li class="chapter" data-level="4.2" data-path="agrupamentos-de-dados.html"><a href="agrupamentos-de-dados.html#matrizes"><i class="fa fa-check"></i><b>4.2</b> Matrizes</a></li>
<li class="chapter" data-level="4.3" data-path="agrupamentos-de-dados.html"><a href="agrupamentos-de-dados.html#data-frames"><i class="fa fa-check"></i><b>4.3</b> Data frames</a></li>
<li class="chapter" data-level="4.4" data-path="agrupamentos-de-dados.html"><a href="agrupamentos-de-dados.html#tibbles"><i class="fa fa-check"></i><b>4.4</b> Tibbles</a></li>
<li class="chapter" data-level="4.5" data-path="agrupamentos-de-dados.html"><a href="agrupamentos-de-dados.html#array"><i class="fa fa-check"></i><b>4.5</b> Array</a></li>
<li class="chapter" data-level="4.6" data-path="agrupamentos-de-dados.html"><a href="agrupamentos-de-dados.html#listas"><i class="fa fa-check"></i><b>4.6</b> Listas</a></li>
<li class="chapter" data-level="4.7" data-path="agrupamentos-de-dados.html"><a href="agrupamentos-de-dados.html#factors"><i class="fa fa-check"></i><b>4.7</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="trabalhando-com-variáveis-no-r-base.html"><a href="trabalhando-com-variáveis-no-r-base.html"><i class="fa fa-check"></i><b>5</b> Trabalhando com variáveis no R Base</a>
<ul>
<li class="chapter" data-level="5.1" data-path="trabalhando-com-variáveis-no-r-base.html"><a href="trabalhando-com-variáveis-no-r-base.html#manuseio-de-variáveis"><i class="fa fa-check"></i><b>5.1</b> Manuseio de variáveis</a></li>
<li class="chapter" data-level="5.2" data-path="trabalhando-com-variáveis-no-r-base.html"><a href="trabalhando-com-variáveis-no-r-base.html#funções-numéricas-básicas"><i class="fa fa-check"></i><b>5.2</b> Funções numéricas básicas</a></li>
<li class="chapter" data-level="5.3" data-path="trabalhando-com-variáveis-no-r-base.html"><a href="trabalhando-com-variáveis-no-r-base.html#funções-textuais-básicas"><i class="fa fa-check"></i><b>5.3</b> Funções textuais básicas</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="criando-sua-própria-função.html"><a href="criando-sua-própria-função.html"><i class="fa fa-check"></i><b>6</b> Criando sua própria função</a>
<ul>
<li class="chapter" data-level="6.1" data-path="criando-sua-própria-função.html"><a href="criando-sua-própria-função.html#modularização-do-código"><i class="fa fa-check"></i><b>6.1</b> Modularização do código</a></li>
<li class="chapter" data-level="6.2" data-path="criando-sua-própria-função.html"><a href="criando-sua-própria-função.html#comentários"><i class="fa fa-check"></i><b>6.2</b> Comentários</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="pacotes-bibliotecas.html"><a href="pacotes-bibliotecas.html"><i class="fa fa-check"></i><b>7</b> Pacotes / Bibliotecas</a>
<ul>
<li class="chapter" data-level="7.1" data-path="pacotes-bibliotecas.html"><a href="pacotes-bibliotecas.html#clipr"><i class="fa fa-check"></i><b>7.1</b> clipr</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="obtendo-dados.html"><a href="obtendo-dados.html"><i class="fa fa-check"></i><b>8</b> Obtendo dados</a>
<ul>
<li class="chapter" data-level="8.1" data-path="obtendo-dados.html"><a href="obtendo-dados.html#planilhas-csv-excel"><i class="fa fa-check"></i><b>8.1</b> Planilhas (csv / Excel)</a></li>
<li class="chapter" data-level="8.2" data-path="obtendo-dados.html"><a href="obtendo-dados.html#txt-bloco-de-notas-e-word"><i class="fa fa-check"></i><b>8.2</b> TXT (bloco de notas) e Word</a></li>
<li class="chapter" data-level="8.3" data-path="obtendo-dados.html"><a href="obtendo-dados.html#xml"><i class="fa fa-check"></i><b>8.3</b> XML</a></li>
<li class="chapter" data-level="8.4" data-path="obtendo-dados.html"><a href="obtendo-dados.html#dados-coletados-por-meio-de-pacotes"><i class="fa fa-check"></i><b>8.4</b> Dados coletados por meio de pacotes</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="obtendo-dados.html"><a href="obtendo-dados.html#getdfpdata"><i class="fa fa-check"></i><b>8.4.1</b> GetDFPData</a></li>
<li class="chapter" data-level="8.4.2" data-path="obtendo-dados.html"><a href="obtendo-dados.html#bcbdata"><i class="fa fa-check"></i><b>8.4.2</b> BCBData</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="obtendo-dados.html"><a href="obtendo-dados.html#juntando-bases"><i class="fa fa-check"></i><b>8.5</b> Juntando bases</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="exportando.html"><a href="exportando.html"><i class="fa fa-check"></i><b>9</b> Exportando</a>
<ul>
<li class="chapter" data-level="9.1" data-path="exportando.html"><a href="exportando.html#markdown"><i class="fa fa-check"></i><b>9.1</b> Markdown</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="10" data-path="exemplos-de-contabilidade.html"><a href="exemplos-de-contabilidade.html"><i class="fa fa-check"></i><b>10</b> Exemplos de Contabilidade</a>
<ul>
<li class="chapter" data-level="10.1" data-path="exemplos-de-contabilidade.html"><a href="exemplos-de-contabilidade.html#diário-contábil-e-balancete"><i class="fa fa-check"></i><b>10.1</b> Diário Contábil e Balancete</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introdução ao R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="agrupamentos-de-dados" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Agrupamentos de Dados</h1>
<p>Pode ser desejável juntar vários valores em um único objeto gravado na memória usada pelo R. Por exemplo, você pode querer criar um objeto que contenha o nome das empresas que tiveram as maiores ofertas públicas iniciais na bolsa de valores brasileira em 2020; ou você pode querer a relação dos nomes e dos valores. Dependendo dos tipos de dados envolvidos, a forma de fazer isso pode mudar.</p>
<div id="vetores" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Vetores</h2>
<p>Quando a sua relação trata de apenas um conjunto de valores de mesmo tipo (todos numéricos, todos textuais ou todos lógicos), pode ser formada como um <strong>vetor</strong>. Por exemplo, poderia haver um vetor com o nome dos CEOs das empresas do setor bancário; ou um vetor com o salário desses CEOs.<br />
Entretanto, se estivéssemos falando de uma relação envolvendo os nomes <strong>e</strong> os salários, seria inadequado usarmos o vetor, porque agora teríamos duas dimensões, além de dois tipos: uma mesma pessoa (o CEO) possui duas características: o nome (textual / string) e o salário (numérica / num).</p>
<p>A criação de vetores é feita com o uso do c( ), em que os valores que devem ser atribuídos ao vetor são incluídos dentro dos parênteses e separados por vírgula.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="agrupamentos-de-dados.html#cb52-1" aria-hidden="true" tabindex="-1"></a>vetorNumerico <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb52-2"><a href="agrupamentos-de-dados.html#cb52-2" aria-hidden="true" tabindex="-1"></a>vetorLogico <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>,<span class="cn">FALSE</span>)</span>
<span id="cb52-3"><a href="agrupamentos-de-dados.html#cb52-3" aria-hidden="true" tabindex="-1"></a>vetorTextual <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Eu&quot;</span>, <span class="st">&quot;Nasci&quot;</span>, <span class="st">&quot;há&quot;</span>, <span class="st">&quot;10.000&quot;</span>, <span class="st">&quot;anos&quot;</span>, <span class="st">&quot;atrás&quot;</span>)</span></code></pre></div>
<p>Note que todos os vetores foram criados com dados de mesmo tipo. O vetor numérico tem apenas números inteiros (1 a 5); o vetor lógico tem apenas Verdadeiro (TRUE) e Falso (FALSE); o vetor de texto tem apenas elementos textuais (mesmo o número está entre aspas, o que força que aqueles dígitos sejam lidos como “texto”).</p>
<p>Caso você tente misturar tipos, o R irá forçar a padronização. Por exemplo, o que aconteceria se você tentasse criar um vetor com números e textos?</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="agrupamentos-de-dados.html#cb53-1" aria-hidden="true" tabindex="-1"></a>vetorNumTex <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="st">&quot;três&quot;</span>,<span class="st">&quot;4&quot;</span>,<span class="dv">5</span>)</span>
<span id="cb53-2"><a href="agrupamentos-de-dados.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(vetorNumTex)</span></code></pre></div>
<pre><code>## [1] &quot;1&quot;    &quot;2&quot;    &quot;três&quot; &quot;4&quot;    &quot;5&quot;</code></pre>
<p>Todos os elementos apresentados estão entre aspas. Como o R não tem uma forma de transformar “três” em um número, ele converte todos os outros números em texto. Por isso, 1 vira “1,” 2 vira “2” e 5 vira “5.”</p>
<blockquote>
<p>Teste no seu console a seguinte operação: “3” + 1</p>
</blockquote>
<blockquote>
<p>O R informará um erro. “3” não é um número, mas um texto (por causa das aspas). Não é possível somar um texto com um número. É o mesmo que você tentar somar “banana” com 97. Não dá.</p>
</blockquote>
</div>
<div id="matrizes" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Matrizes</h2>
<p>A matriz é um conjunto de dados do mesmo tipo, ordenados em linhas (filas horizontais) e colunas (filas verticais). É criada pelo matrix(), devendo ser informados os dados que irão compor a matriz (normalmente dispostos em um vetor), o número de linhas (nrow), o número de colunas (ncol) e se o preenchimento deve ser feito por linha (byrow = TRUE) ou por coluna (byrow = FALSE).</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="agrupamentos-de-dados.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se a matriz dos inteiros de 1 a 6, dispostos em 3 linhas e 2 colunas, preenchida pela ordem das linhas.</span></span>
<span id="cb55-2"><a href="agrupamentos-de-dados.html#cb55-2" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb55-3"><a href="agrupamentos-de-dados.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mat)</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4
## [3,]    5    6</code></pre>
<p>Ou seja, os números foram distribuídos até o fim da primeira linha, depois até o fim da segunda linha e depois até o fim da terceira (e última) linha.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="agrupamentos-de-dados.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se a matriz dos inteiros de 1 a 6, dispostos em 3 linhas e 2 colunas, preenchida pela ordem das colunas</span></span>
<span id="cb57-2"><a href="agrupamentos-de-dados.html#cb57-2" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span>)</span>
<span id="cb57-3"><a href="agrupamentos-de-dados.html#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mat)</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6</code></pre>
<p>Em contraste, aqui o preenchimento foi por colunas. Foi preenchida toda a primeira coluna e depois toda a segunda coluna.</p>
<p>Se já tivéssemos um vetor salvo na memória, poderíamos usá-lo para compor a matriz.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="agrupamentos-de-dados.html#cb59-1" aria-hidden="true" tabindex="-1"></a>vetorParaMatriz <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;eu&quot;</span>, <span class="st">&quot;nasci&quot;</span>, <span class="st">&quot;há&quot;</span>, <span class="st">&quot;dez mil&quot;</span>, <span class="st">&quot;anos&quot;</span>, <span class="st">&quot;atrás&quot;</span>) </span>
<span id="cb59-2"><a href="agrupamentos-de-dados.html#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="agrupamentos-de-dados.html#cb59-3" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">=</span> <span class="fu">matrix</span>(vetorParaMatriz, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb59-4"><a href="agrupamentos-de-dados.html#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mat)</span></code></pre></div>
<pre><code>##      [,1]   [,2]     
## [1,] &quot;eu&quot;   &quot;nasci&quot;  
## [2,] &quot;há&quot;   &quot;dez mil&quot;
## [3,] &quot;anos&quot; &quot;atrás&quot;</code></pre>
<p>Você reparou que aparecem valores entre colchetes e separados por vírgulas? Eles indicam a posição na matriz.</p>
<table>
<thead>
<tr class="header">
<th align="center">[m,n]</th>
<th align="center">Posição</th>
<th align="center">Elementos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">[1,]</td>
<td align="center">Primeira Linha</td>
<td align="center">“eu,” “nasci”</td>
</tr>
<tr class="even">
<td align="center">[2,]</td>
<td align="center">Segunda Linha</td>
<td align="center">“há,”dez mil”</td>
</tr>
<tr class="odd">
<td align="center">[,1]</td>
<td align="center">Primeira Coluna</td>
<td align="center">“eu,” “há,” “anos”</td>
</tr>
<tr class="even">
<td align="center">[,2]</td>
<td align="center">Segunda Coluna</td>
<td align="center">“nasci,”dez mil”, “atrás”</td>
</tr>
<tr class="odd">
<td align="center">[1,1]</td>
<td align="center">Primeira Linha, Primeira Coluna</td>
<td align="center">“eu”</td>
</tr>
<tr class="even">
<td align="center">[1,2]</td>
<td align="center">Primeira Linha, Segunda Coluna</td>
<td align="center">“nasci”</td>
</tr>
<tr class="odd">
<td align="center">[2,1]</td>
<td align="center">Segunda Linha, Primeira Coluna</td>
<td align="center">“há”</td>
</tr>
<tr class="even">
<td align="center">[2,2]</td>
<td align="center">Segunda Linha, Segunda Coluna</td>
<td align="center">“dez mil”</td>
</tr>
</tbody>
</table>
<p>Eventualmente, pode ser interessante informar os nomes para as linhas e para as colunas. Por exemplo, se você estiver precisando mapear a distância entre as unidades de uma empresa, seria importante dizer quais são as filiais.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="agrupamentos-de-dados.html#cb61-1" aria-hidden="true" tabindex="-1"></a>vetorFiliais <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Natal&quot;</span>, <span class="st">&quot;Parnamirim&quot;</span>, <span class="st">&quot;Macaíba&quot;</span>)</span>
<span id="cb61-2"><a href="agrupamentos-de-dados.html#cb61-2" aria-hidden="true" tabindex="-1"></a>vetorDistancias <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">12</span>, <span class="dv">2</span>, <span class="dv">0</span>)</span></code></pre></div>
<p>Por isso, vamos incluir o argumento</p>
<blockquote>
<p>dimnames = list(row_names, col_names)</p>
</blockquote>
<p><em>dimnames</em> significa nome das dimensões, que é informado por meio de dois vetores: o vetor com o nomes das linhas (row_names) e o vetor com o nome das colunas (col_names).</p>
<p>No nosso exemplo, as linhas e as colunas devem possuir os mesmos nomes (porque queremos estabelecer uma matriz com a distância entre cada unidade da empresa). Por isso, trocaremos row_names por vetorFiliais e <strong>também</strong> trocaremos col_names por vetorFiliais.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="agrupamentos-de-dados.html#cb62-1" aria-hidden="true" tabindex="-1"></a>distanciaFiliais <span class="ot">=</span> <span class="fu">matrix</span>(vetorDistancias, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>,</span>
<span id="cb62-2"><a href="agrupamentos-de-dados.html#cb62-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">dimnames =</span> <span class="fu">list</span>(vetorFiliais, vetorFiliais))</span>
<span id="cb62-3"><a href="agrupamentos-de-dados.html#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="agrupamentos-de-dados.html#cb62-4" aria-hidden="true" tabindex="-1"></a>distanciaFiliais</span></code></pre></div>
<pre><code>##            Natal Parnamirim Macaíba
## Natal          0         10      12
## Parnamirim    10          0       2
## Macaíba       12          2       0</code></pre>
<p>Por que o elemento [1,1] da matriz foi 0? A distância de uma unidade para ela mesmo, por definição, é zero. Para solicitar a distância entre a filial Natal e a filial Parnamirim:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="agrupamentos-de-dados.html#cb64-1" aria-hidden="true" tabindex="-1"></a>distanciaFiliais[<span class="st">&quot;Natal&quot;</span>, <span class="st">&quot;Parnamirim&quot;</span>]</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>Perceba que, nessa matriz, a distância entre Natal - Parnamirim é a mesma que Parnamirim - Natal. Se pensarmos em termos de rodovias, isso pode não ser necessariamente verdade, pois em casos específicos pode ser necessário um deslocamento adicional em um dos sentidos (por exemplo, ir adiante x quilômetros para conseguir fazer um retorno). No caso dessa matriz, solicitar o valor como:</p>
<blockquote>
<p>distanciaFiliais[“Natal,” “Parnamirim”]</p>
</blockquote>
<p>ou</p>
<blockquote>
<p>distanciaFiliais[“Parnamirim,” “Natal”]</p>
</blockquote>
<p>produziria o mesmo resultado e, nesse caso, é irrelevante. Entretanto, é importante ter em mente que isso nem sempre será verdade. Além disso, se quiséssemos saber a distância da filial Natal para todas as demais, deveríamos informar apenas a linha, omitindo a informação após a vírgula.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="agrupamentos-de-dados.html#cb66-1" aria-hidden="true" tabindex="-1"></a>distanciaFiliais[<span class="st">&quot;Natal&quot;</span>,]</span></code></pre></div>
<pre><code>##      Natal Parnamirim    Macaíba 
##          0         10         12</code></pre>
<p>Alternativamente, sabendo que Natal é a primeira linha da matriz, também seria possível executar</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="agrupamentos-de-dados.html#cb68-1" aria-hidden="true" tabindex="-1"></a>distanciaFiliais[<span class="dv">1</span>,]</span></code></pre></div>
<pre><code>##      Natal Parnamirim    Macaíba 
##          0         10         12</code></pre>
<p>A segunda opção é particularmente importante quando as filas (linhas ou colunas) não estão nomeadas.</p>
</div>
<div id="data-frames" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Data frames</h2>
<p>O data frame é similar a matrix, mas admite colunas com tipos diferentes. Nesse caso, é possível incluir uma coluna para o nome de uma empresa (string), uma coluna para o CNPJ (string), uma coluna para o número de empregados (integer), uma coluna para o faturamento (float) e uma coluna para identificar se as demonstrações já foram encerradas ou se ainda estão pendentes (boolean).</p>
<p>O data frame é criado por meio do data.frame(), onde são passados os valores que irão entrar na estrutura. Uma possibilidade é passarmos vetores que representem as colunas. Assim, usaríamos um vetor para a empresa, um vetor para o CNPJ, um vetor para os empregados e um vetor para o faturamento.</p>
<p>Não é necessário informar a quantidade de linhas ou colunas, já que o R não precisará organizar os dados (no caso da matriz, foi necessário informar como ela deveria ser preenchida). Os vetores serão incluídos como colunas na mesma ordem em que forem aparecendo dentro do data.frame().</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="agrupamentos-de-dados.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ainda discutiremos o que são factors, mas por enquanto insiram esse argumento.</span></span>
<span id="cb70-2"><a href="agrupamentos-de-dados.html#cb70-2" aria-hidden="true" tabindex="-1"></a>clientes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">empresa =</span> <span class="fu">c</span>(<span class="st">&quot;Marte S.A.&quot;</span>, <span class="st">&quot;Deimos S.A.&quot;</span>, <span class="st">&quot;Phobos S.A.&quot;</span>), </span>
<span id="cb70-3"><a href="agrupamentos-de-dados.html#cb70-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">cnpj =</span> <span class="fu">c</span>(<span class="st">&quot;00.000.001/0001-00&quot;</span>,<span class="st">&quot;00.000.011/0001-10&quot;</span>, <span class="st">&quot;99.000.001/0001-55&quot;</span>),</span>
<span id="cb70-4"><a href="agrupamentos-de-dados.html#cb70-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">empregados =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">20</span>, <span class="dv">25</span>), </span>
<span id="cb70-5"><a href="agrupamentos-de-dados.html#cb70-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">encerramento =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>),</span>
<span id="cb70-6"><a href="agrupamentos-de-dados.html#cb70-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb70-7"><a href="agrupamentos-de-dados.html#cb70-7" aria-hidden="true" tabindex="-1"></a>clientes</span></code></pre></div>
<pre><code>##       empresa               cnpj empregados encerramento
## 1  Marte S.A. 00.000.001/0001-00         10        FALSE
## 2 Deimos S.A. 00.000.011/0001-10         20        FALSE
## 3 Phobos S.A. 99.000.001/0001-55         25         TRUE</code></pre>
<p>Por conta dessa permissão para uso de tipos diferentes em uma mesma estrutura, os data frames são consideravalmente importantes. Para solicitar uma fila específica (linha ou coluna) ou um elemento, é possível usar a mesma notação das matrizes.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="agrupamentos-de-dados.html#cb72-1" aria-hidden="true" tabindex="-1"></a>clientes[<span class="dv">1</span>,]</span></code></pre></div>
<pre><code>##      empresa               cnpj empregados encerramento
## 1 Marte S.A. 00.000.001/0001-00         10        FALSE</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="agrupamentos-de-dados.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># para gerar uma relação com os CNPJs:</span></span>
<span id="cb74-2"><a href="agrupamentos-de-dados.html#cb74-2" aria-hidden="true" tabindex="-1"></a>clientes[,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] &quot;00.000.001/0001-00&quot; &quot;00.000.011/0001-10&quot; &quot;99.000.001/0001-55&quot;</code></pre>
<p>Da mesma forma que fizemos com as matrizes, podemos solicitar uma coluna com base em seu nome.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="agrupamentos-de-dados.html#cb76-1" aria-hidden="true" tabindex="-1"></a>clientes[,<span class="st">&quot;cnpj&quot;</span>]</span></code></pre></div>
<pre><code>## [1] &quot;00.000.001/0001-00&quot; &quot;00.000.011/0001-10&quot; &quot;99.000.001/0001-55&quot;</code></pre>
<p>Percebea que nesse caso as linhas não foram nomeadas. No caso dos data frames, é bem comum que o identificador seja inserido como um dado</p>
<p>O data frame ainda admite uma forma adicional de solicitar uma coluna, informando o nome do objeto seguido do cifrão ($) e do nome da coluna.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="agrupamentos-de-dados.html#cb78-1" aria-hidden="true" tabindex="-1"></a>clientes<span class="sc">$</span>cnpj</span></code></pre></div>
<pre><code>## [1] &quot;00.000.001/0001-00&quot; &quot;00.000.011/0001-10&quot; &quot;99.000.001/0001-55&quot;</code></pre>
<p>Perceba como a notação do R evolui. Quando resolvemos solicitar um clientes$cnpj, estamos usando um procedimento equivalente a clientes[,“cnpj”]. Como poderíamos fazer para usando a notação com cifrão, solicitar o terceiro elemento dessa relação?</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="agrupamentos-de-dados.html#cb80-1" aria-hidden="true" tabindex="-1"></a>clientes<span class="sc">$</span>cnpj[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] &quot;99.000.001/0001-55&quot;</code></pre>
<p>Não precisamos informar dois elementos dentro dos colchetes [,] porque um deles foi informado anteriormente (no caso, a coluna <em>cnpj</em>)! Assim, quando informarmos o [3] estamos automaticamente nos referindo à linha.</p>
</div>
<div id="tibbles" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Tibbles</h2>
<p>O tibble é um tipo especial de data.frame, que realiza algumas operações de forma ligeiramente diferente que o data.frame convencional. Eles fazem menos e reclamam mais, induzindo o programador a tratar melhor certos aspectos do código. Essencialmente: não permitem referências parciais ao nome de variáveis contidas em um data.frame; são mais fiéis ao que se espera que as variáveis serão (em várias ocasiões, não produzem factors, ao invés de chars) e avisam se uma coluna que está sendo requerida não faz parte do banco de dados.</p>
<p>Para mais detalhes, acesse a documentação: &lt; <a href="https://tibble.tidyverse.org/" class="uri">https://tibble.tidyverse.org/</a> &gt;.</p>
<p>Como o tibble não é uma estrutura nativa do R, deve ser acessada por meio do pacote tibble.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="agrupamentos-de-dados.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chamando o pacote tibble</span></span>
<span id="cb82-2"><a href="agrupamentos-de-dados.html#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb82-3"><a href="agrupamentos-de-dados.html#cb82-3" aria-hidden="true" tabindex="-1"></a>primeiroTibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">nome =</span> <span class="fu">c</span>(<span class="st">&quot;raimundo&quot;</span>, <span class="st">&quot;marciano&quot;</span>), <span class="at">numeros =</span> <span class="fu">c</span>(<span class="dv">29</span>,<span class="dv">12</span>))</span>
<span id="cb82-4"><a href="agrupamentos-de-dados.html#cb82-4" aria-hidden="true" tabindex="-1"></a>primeiroDataFrame <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">nome =</span> <span class="fu">c</span>(<span class="st">&quot;raimundo&quot;</span>, <span class="st">&quot;marciano&quot;</span>), <span class="at">numeros =</span> <span class="fu">c</span>(<span class="dv">29</span>,<span class="dv">12</span>))</span>
<span id="cb82-5"><a href="agrupamentos-de-dados.html#cb82-5" aria-hidden="true" tabindex="-1"></a>primeiroTibble</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   nome     numeros
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 raimundo      29
## 2 marciano      12</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="agrupamentos-de-dados.html#cb84-1" aria-hidden="true" tabindex="-1"></a>primeiroDataFrame</span></code></pre></div>
<pre><code>##       nome numeros
## 1 raimundo      29
## 2 marciano      12</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="agrupamentos-de-dados.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(primeiroDataFrame)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    2 obs. of  2 variables:
##  $ nome   : chr  &quot;raimundo&quot; &quot;marciano&quot;
##  $ numeros: num  29 12</code></pre>
<p>Perceba que o tibble exibido já indica os tipos das variáveis que o compõem. No caso do data frame, foi necessário solicitar, por meio do comando str(), essa informação. Além disso, o primeiroTibble tem um resultado mais previsível que o primeiroDataFrame: as variáveis textuais foram consideradas corretamente como <chr> no tibble, mas foram identificadas como <fct> no data frame, o que pode ser um comportamento não esperado. Para garantir que o data frame trate a primeira coluna como string, é necessário forçar esse comportamento, incluindo o parâmetro &lt;stringsAsFactors = F&gt;.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="agrupamentos-de-dados.html#cb88-1" aria-hidden="true" tabindex="-1"></a>segundoDataFrame <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">nome =</span> <span class="fu">c</span>(<span class="st">&quot;raimundo&quot;</span>, <span class="st">&quot;marciano&quot;</span>), </span>
<span id="cb88-2"><a href="agrupamentos-de-dados.html#cb88-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">numeros =</span> <span class="fu">c</span>(<span class="dv">29</span>,<span class="dv">12</span>), <span class="at">stringsAsFactors =</span> F)</span>
<span id="cb88-3"><a href="agrupamentos-de-dados.html#cb88-3" aria-hidden="true" tabindex="-1"></a>segundoDataFrame</span></code></pre></div>
<pre><code>##       nome numeros
## 1 raimundo      29
## 2 marciano      12</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="agrupamentos-de-dados.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(segundoDataFrame)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    2 obs. of  2 variables:
##  $ nome   : chr  &quot;raimundo&quot; &quot;marciano&quot;
##  $ numeros: num  29 12</code></pre>
<p>Agora temos um data.frame com os mesmos tipos de variáveis que o tibble. Em resumo, as diferenças são pequenas, mas o tibble é uma versão mais moderna, mais previsível e que gera mais alertas par ao programador que a está usando.</p>
<p>A solicitação de partes do tibble é idêntica à do data.frame.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="agrupamentos-de-dados.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Para solicitar a colunha chamada de &#39;nome&#39;</span></span>
<span id="cb92-2"><a href="agrupamentos-de-dados.html#cb92-2" aria-hidden="true" tabindex="-1"></a>primeiroTibble[<span class="st">&#39;nome&#39;</span>]</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   nome    
##   &lt;chr&gt;   
## 1 raimundo
## 2 marciano</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="agrupamentos-de-dados.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Para solicitar a segunda coluna</span></span>
<span id="cb94-2"><a href="agrupamentos-de-dados.html#cb94-2" aria-hidden="true" tabindex="-1"></a>primeiroTibble[,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   numeros
##     &lt;dbl&gt;
## 1      29
## 2      12</code></pre>
<p>A principal diferença é que o tibble não aceita referência parcial. Isso significa que poderíamos solicitar ao data.frame uma coluna informando apenas parte do nome dela, ao passo que o tibble exige o nome completo.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="agrupamentos-de-dados.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># O data.frame contém uma coluna chamada &#39;nome&#39;. Veja o que acontece se, por descuido</span></span>
<span id="cb96-2"><a href="agrupamentos-de-dados.html#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co"># pedirmos a coluna $nom (faltando o &#39;e&#39;)</span></span>
<span id="cb96-3"><a href="agrupamentos-de-dados.html#cb96-3" aria-hidden="true" tabindex="-1"></a>primeiroDataFrame<span class="sc">$</span>nom</span></code></pre></div>
<pre><code>## [1] &quot;raimundo&quot; &quot;marciano&quot;</code></pre>
<p>O data.frame retorna os dados normalmente, como se o nome estivesse completo. Isso pode ser indesejável caso haja ambiguidade nos títulos das variáveis. Por exemplo, poderia haver uma variável chamada ‘nome’ e outra ‘nomeCompleto.’ Com a informação incompleta, você não garante estar usando a variável correta. O tibble exige que você informe o nome exato do que está sendo solicitado.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="agrupamentos-de-dados.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Veja o que acontece se você pedir o nome incompleto de uma variável</span></span>
<span id="cb98-2"><a href="agrupamentos-de-dados.html#cb98-2" aria-hidden="true" tabindex="-1"></a>primeiroTibble<span class="sc">$</span>nom</span></code></pre></div>
<pre><code>## Warning: Unknown or uninitialised column: `nom`.</code></pre>
<pre><code>## NULL</code></pre>
<p>O R retorna um aviso que informa que não é possível identificar uma coluna chamada ‘nom.’ O mesmo aconteceria se você solicitasse qualquer outro nome não presente no banco de dados, como</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="agrupamentos-de-dados.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aconteceria o mesmo se você usasse um nome &#39;nada a ver&#39;</span></span>
<span id="cb101-2"><a href="agrupamentos-de-dados.html#cb101-2" aria-hidden="true" tabindex="-1"></a>primeiroTibble<span class="sc">$</span>valhaMeDeus</span></code></pre></div>
<pre><code>## Warning: Unknown or uninitialised column: `valhaMeDeus`.</code></pre>
<pre><code>## NULL</code></pre>
<p>O retorno é NULL (nulo), porque não há uma coluna chamada ‘valhaMeDeus.’ Não custa lembrar que ele também diferencia letras maiúsculas de minúsculas (diz-se, nesse caso, que ele é ‘case sensitive’).</p>
<p>Suponha que tenhamos (estranhamente) chamado a variável de ‘nUmErOs.’ Não adiantar solicitar ‘numeros,’ porque seria uma grafia diferente da esperada.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="agrupamentos-de-dados.html#cb104-1" aria-hidden="true" tabindex="-1"></a>outroTibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">nome =</span> <span class="fu">c</span>(<span class="st">&quot;raimundo&quot;</span>, <span class="st">&quot;marciano&quot;</span>), <span class="at">nUmErOs =</span> <span class="fu">c</span>(<span class="dv">29</span>,<span class="dv">12</span>))</span>
<span id="cb104-2"><a href="agrupamentos-de-dados.html#cb104-2" aria-hidden="true" tabindex="-1"></a>outroTibble<span class="sc">$</span>nUmErOs</span></code></pre></div>
<pre><code>## [1] 29 12</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="agrupamentos-de-dados.html#cb106-1" aria-hidden="true" tabindex="-1"></a>outroTibble<span class="sc">$</span>numeros</span></code></pre></div>
<pre><code>## Warning: Unknown or uninitialised column: `numeros`.</code></pre>
<pre><code>## NULL</code></pre>
<p>Por padrão, a exibição de um tibble é limitada a 10 colunas e a uma quantidade de colunas compatível com a tela, o que não acontece com o data.frame, que tenta exibir todas as colunas presentes no banco de dados. Essa característica é dispensável em bancos com poucas variáveis, mas é bastante interessante caso ele contenha algumas centenas, porque não gera um output ilegível (raramente será interessante visualizar simultaneamente centenas de colunas ao mesmo tempo). Caso queira exibir todas as colunas, bastar adicionar o parâmetro (width = Inf) dentro do print().</p>
</div>
<div id="array" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Array</h2>
<p>Um array é uma extensão do conceito de vetor, que ganha atributos: quantidade de dimensões (pode ser maior que 2, ao contrário das matrizes) e essas dimensões podem receber nomes. Note que por ser uma “extensão do conceito de vetor,” o array não é exatamente um vetor!</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="agrupamentos-de-dados.html#cb109-1" aria-hidden="true" tabindex="-1"></a>linhas <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2019</span>, <span class="dv">2020</span>)</span>
<span id="cb109-2"><a href="agrupamentos-de-dados.html#cb109-2" aria-hidden="true" tabindex="-1"></a>colunas <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;ROA&quot;</span>, <span class="st">&quot;ROE&quot;</span>, <span class="st">&quot;Liquidez&quot;</span>)</span>
<span id="cb109-3"><a href="agrupamentos-de-dados.html#cb109-3" aria-hidden="true" tabindex="-1"></a>dimensoes <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Empresa A&quot;</span>, <span class="st">&quot;Empresa B&quot;</span>)</span>
<span id="cb109-4"><a href="agrupamentos-de-dados.html#cb109-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-5"><a href="agrupamentos-de-dados.html#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="fu">array</span>(<span class="fu">c</span>(<span class="fl">0.30</span>, <span class="fl">0.35</span>, <span class="fl">0.32</span>, <span class="fl">0.36</span>, <span class="fl">1.08</span>, <span class="fl">1.12</span>, </span>
<span id="cb109-6"><a href="agrupamentos-de-dados.html#cb109-6" aria-hidden="true" tabindex="-1"></a>        <span class="fl">0.40</span>, <span class="fl">0.25</span>, <span class="fl">0.45</span>, <span class="fl">0.30</span>, <span class="fl">0.99</span>, <span class="fl">1.13</span>), </span>
<span id="cb109-7"><a href="agrupamentos-de-dados.html#cb109-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>), <span class="at">dimnames =</span> <span class="fu">list</span>(linhas,colunas,dimensoes))</span></code></pre></div>
<pre><code>## , , Empresa A
## 
##       ROA  ROE Liquidez
## 2019 0.30 0.32     1.08
## 2020 0.35 0.36     1.12
## 
## , , Empresa B
## 
##       ROA  ROE Liquidez
## 2019 0.40 0.45     0.99
## 2020 0.25 0.30     1.13</code></pre>
<p>Dessaa forma, criamos uma matriz para cada dimensão (empresa A ou B), contendo os respectivos valores de cada indicador (ROA, ROE e Liquidez) em cada ano (2019 e 2020). Uma apresentação alternativa seria um data frame com dados empilhados.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="agrupamentos-de-dados.html#cb111-1" aria-hidden="true" tabindex="-1"></a>linhas <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2019</span>, <span class="dv">2020</span>, <span class="dv">2019</span>, <span class="dv">2020</span>)</span>
<span id="cb111-2"><a href="agrupamentos-de-dados.html#cb111-2" aria-hidden="true" tabindex="-1"></a>colunas <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;ROA&quot;</span>, <span class="st">&quot;ROE&quot;</span>, <span class="st">&quot;Liquidez&quot;</span>)</span>
<span id="cb111-3"><a href="agrupamentos-de-dados.html#cb111-3" aria-hidden="true" tabindex="-1"></a>dimensoes <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Empresa A&quot;</span>, <span class="st">&quot;Empresa A&quot;</span>, <span class="st">&quot;Empresa B&quot;</span>, <span class="st">&quot;Empresa B&quot;</span>)</span>
<span id="cb111-4"><a href="agrupamentos-de-dados.html#cb111-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-5"><a href="agrupamentos-de-dados.html#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">Empresas =</span> dimensoes, <span class="at">Anos =</span> linhas, <span class="at">ROA =</span> <span class="fu">c</span>(<span class="fl">0.30</span>, <span class="fl">0.35</span>, <span class="fl">0.40</span>, <span class="fl">0.25</span>),</span>
<span id="cb111-6"><a href="agrupamentos-de-dados.html#cb111-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">ROE =</span> <span class="fu">c</span>(<span class="fl">0.32</span>, <span class="fl">0.36</span>,<span class="fl">0.45</span>, <span class="fl">0.30</span>), <span class="at">Liquidez =</span> <span class="fu">c</span>(<span class="fl">1.08</span>, <span class="fl">1.12</span>,<span class="fl">0.99</span>, <span class="fl">1.13</span>))</span></code></pre></div>
<pre><code>##    Empresas Anos  ROA  ROE Liquidez
## 1 Empresa A 2019 0.30 0.32     1.08
## 2 Empresa A 2020 0.35 0.36     1.12
## 3 Empresa B 2019 0.40 0.45     0.99
## 4 Empresa B 2020 0.25 0.30     1.13</code></pre>
<p>Note que esse data frame condensa as informações, em comparação ao array com 3 dimensões. Pesquisadores que desejam trabalhar com dados em painel geralmente recorrem a essa estratégia de organização dos dados.</p>
</div>
<div id="listas" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Listas</h2>
<p>A lista é uma forma que podemos usar para criar estruturas mais complexas, quando precisamos, por exemplo de mais dimensões e com tipos diferentes de dados.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="agrupamentos-de-dados.html#cb113-1" aria-hidden="true" tabindex="-1"></a>identificador1 <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;matriz&quot;</span>)</span>
<span id="cb113-2"><a href="agrupamentos-de-dados.html#cb113-2" aria-hidden="true" tabindex="-1"></a>dados1 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">37</span>)</span>
<span id="cb113-3"><a href="agrupamentos-de-dados.html#cb113-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-4"><a href="agrupamentos-de-dados.html#cb113-4" aria-hidden="true" tabindex="-1"></a>identificador2 <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;filial&quot;</span>)</span>
<span id="cb113-5"><a href="agrupamentos-de-dados.html#cb113-5" aria-hidden="true" tabindex="-1"></a>dados2 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">18</span>, <span class="dv">74</span>)</span>
<span id="cb113-6"><a href="agrupamentos-de-dados.html#cb113-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-7"><a href="agrupamentos-de-dados.html#cb113-7" aria-hidden="true" tabindex="-1"></a>lista <span class="ot">=</span> <span class="fu">list</span>(identificador1, dados1, identificador2, dados2)</span>
<span id="cb113-8"><a href="agrupamentos-de-dados.html#cb113-8" aria-hidden="true" tabindex="-1"></a>lista</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;matriz&quot;
## 
## [[2]]
## [1]  1  9 37
## 
## [[3]]
## [1] &quot;filial&quot;
## 
## [[4]]
## [1]  2 18 74</code></pre>
<p>Eventualmente, pode ser necessário “descaracterizar” a lista. Com a função <strong>unlist</strong>, podemos converter a lista anteriormente utilizada em um vetor. Note que a lista possuía elementos string e numéricos, o que era admitido em uma lista, mas não em um vetor.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="agrupamentos-de-dados.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unlist</span>(lista)</span></code></pre></div>
<pre><code>## [1] &quot;matriz&quot; &quot;1&quot;      &quot;9&quot;      &quot;37&quot;     &quot;filial&quot; &quot;2&quot;      &quot;18&quot;     &quot;74&quot;</code></pre>
<p>Como esperado, o vetor converte todos os elementos em strings (texto), já que ele não consegue transformar “matriz” em um número.</p>
<p>Outro exemplo:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="agrupamentos-de-dados.html#cb117-1" aria-hidden="true" tabindex="-1"></a>lista2 <span class="ot">=</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;primeiro&quot;</span>, <span class="st">&quot;segundo&quot;</span>), <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">ncol =</span> <span class="dv">3</span>))</span>
<span id="cb117-2"><a href="agrupamentos-de-dados.html#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(lista2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ordem&quot;</span>, <span class="st">&quot;dados&quot;</span>)</span>
<span id="cb117-3"><a href="agrupamentos-de-dados.html#cb117-3" aria-hidden="true" tabindex="-1"></a>lista2</span></code></pre></div>
<pre><code>## $ordem
## [1] &quot;primeiro&quot; &quot;segundo&quot; 
## 
## $dados
##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<p>O uso de nomes é opcional, mas facilita o manuseio dos dados posteriormente.</p>
</div>
<div id="factors" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> Factors</h2>
<p>O factor é um tipo especial de vetor, utilizado para variáveis categóricas, ou seja, qualidades ou atributos de algo que serão usadas em alguma análise. Assim, se você está desenvolvendo um estudo comparativo por setor econômico, pode ser uma ideia interessante incluir o setor econômico como um factor. Note que setores econômicos não possuem um critério específico de ordenação; normalmente esse tipo de análise não define que um setor é mais importante que outro, sendo apenas um critério de separação entre as empresas que pertencem a cada um. Por exemplo, se eu quero comparar que setores sofreram mais com a Covid19 durante o ano de 2020, eu devo identificar que empresas pertencem a cada setor e analisar o que aconteceu com elas. Não há, a priori, qualquer ordem entre eles.</p>
<p>Note que isso é bem diferente de perguntas, feitas em questionários, com graus de comparação. Por exemplo, se perguntamos ao entrevistado se ele está “pouco satisfeito,” “satisfeito” ou “muito satisfeito,” a resposta tem níveis. É claro que “muito satisfeito” possui um valor maior que “satisfeito” e é claro que “satisfeito” possui um valor maior que “pouco satisfeito.”</p>
<p>O R não possui um mecanismo interno para entender expressões textuais, de forma que o programador precisa explicar para o R que certas strings possuem valor superior a outras. É fácil para um ser humano entender que “excelente” é melhor que “bom,” mas como o R não sabe o que significa nem bom, nem excelente, podemos criar um factor.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="agrupamentos-de-dados.html#cb119-1" aria-hidden="true" tabindex="-1"></a>vetor <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;bom&quot;</span>, <span class="st">&quot;bom&quot;</span>, <span class="st">&quot;excelente&quot;</span>)</span>
<span id="cb119-2"><a href="agrupamentos-de-dados.html#cb119-2" aria-hidden="true" tabindex="-1"></a>fat <span class="ot">=</span> <span class="fu">factor</span>(vetor, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;bom&quot;</span>, <span class="st">&quot;excelente&quot;</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb119-3"><a href="agrupamentos-de-dados.html#cb119-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-4"><a href="agrupamentos-de-dados.html#cb119-4" aria-hidden="true" tabindex="-1"></a>fat</span></code></pre></div>
<pre><code>## [1] bom       bom       excelente
## Levels: bom &lt; excelente</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="agrupamentos-de-dados.html#cb121-1" aria-hidden="true" tabindex="-1"></a>fat[<span class="dv">1</span>] <span class="sc">&lt;</span> fat[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Várias funções de importações incluem um comando para que você informe qual tratamento deseja (geralmente o parâmetro é <em>stringsAsFactors</em>).</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="variáveis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="trabalhando-com-variáveis-no-r-base.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["introR.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
